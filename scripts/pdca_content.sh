#!/bin/bash
source ~/robby-the-match/scripts/utils.sh
init_log "pdca_content"

run_claude "
STATE.mdã‚’èª­ã‚ã€‚CLAUDE.mdã‚‚èª­ã‚ã€‚ä»Šæ—¥ã¯$(date +%A)ï¼ˆæ›œæ—¥${DOW}ï¼‰ã€‚

ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é«˜é€Ÿç”Ÿæˆã‚µã‚¤ã‚¯ãƒ«ã€‘ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§TikTok+InstagramåŒæ™‚ç”Ÿæˆã€‚

â–  Check
1. STATE.mdã®SNSçŠ¶æ…‹ã¨KPIã‚’ç¢ºèª
2. content/generated/ã«ä»Šæ—¥åˆ†ãŒã‚ã‚‹ã‹ç¢ºèª
   â†’ ã‚ã‚Œã°å“è³ªãƒã‚§ãƒƒã‚¯ã®ã¿ã€ãªã‘ã‚Œã°æ–°è¦ç”Ÿæˆ

â–  Plan
3. PROGRESS.mdã‹ã‚‰é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡ºï¼ˆã‚ã‚Œã°ï¼‰
4. ã‚«ãƒ†ã‚´ãƒªMIXç¢ºèªï¼ˆ40%ã‚ã‚‹ã‚ã‚‹/25%è»¢è·/20%çµ¦ä¸Ž/5%ç´¹ä»‹/10%ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰

â–  Doï¼ˆä¸¦è¡Œå®Ÿè¡Œï¼‰
5. TikTokå°æœ¬JSONç”Ÿæˆ+ã‚¹ãƒ©ã‚¤ãƒ‰6æžšï¼ˆãƒ•ãƒƒã‚¯20æ–‡å­—ã€CTA 8:2ï¼‰
6. Instagramç”¨ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ç´ ææº–å‚™
7. Slacké€šçŸ¥ï¼ˆãƒ•ãƒƒã‚¯æ–‡+ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³+17:30æŠ•ç¨¿äºˆå®šï¼‰
8. Postizä¸‹æ›¸ã or Slacké€ä¿¡

â–  Act
9. STATE.mdæ›´æ–°ï¼ˆæŠ•ç¨¿æ•°ã€ä»Šé€±åˆ†ç´ æçŠ¶æ³ï¼‰
10. PROGRESS.mdã«è¨˜éŒ²ï¼ˆIDã€ã‚«ãƒ†ã‚´ãƒªã€ãƒ•ãƒƒã‚¯æ–‡ï¼‰
" 30

git_sync "content: ${TODAY} ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ"
update_state "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ"
update_progress "ðŸ“± ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ" "$(cat content/generated/${TODAY}_*.json 2>/dev/null | head -3 || echo 'ãƒ­ã‚°å‚ç…§')"
slack_notify "ðŸ“± æŠ•ç¨¿æº–å‚™å®Œäº†ã€‚17:30ã«TikTokç¢ºèªâ†’æŠ•ç¨¿ãƒœã‚¿ãƒ³ã€‚" "content"
echo "[$TODAY] pdca_contentå®Œäº†" >> "$LOG"
