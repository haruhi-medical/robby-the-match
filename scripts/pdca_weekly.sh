#!/bin/bash
source ~/robby-the-match/scripts/utils.sh
init_log "pdca_weekly"

run_claude "
STATE.mdã‚’èª­ã‚ã€‚CLAUDE.mdã‚‚èª­ã‚ã€‚docs/seo_strategy.mdã‚‚èª­ã‚ã€‚

ã€é€±æ¬¡é«˜é€Ÿç·æ‹¬ã‚µã‚¤ã‚¯ãƒ«ã€‘ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæœ€å¤§æ•°ã§4ãƒãƒ¼ãƒ åŒæ™‚å®Ÿè¡Œã€‚

â–  ãƒãƒ¼ãƒ A: é€±é–“ãƒ‡ãƒ¼ã‚¿åˆ†æž
- PROGRESS.mdã®ä»Šé€±åˆ†ã‚’å…¨éƒ¨èª­ã‚€
- git log --oneline --since='7 days ago'
- æŠ•ç¨¿æ•°ã€PVã€æµå…¥KWã€SNSå†ç”Ÿæ•°ã‚’é›†è¨ˆ
- ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é€²æ—ãƒã‚§ãƒƒã‚¯
- ãƒ”ãƒ¼ã‚¿ãƒ¼ãƒ»ãƒ†ã‚£ãƒ¼ãƒ«ã®å•ã„:
  ä»Šé€±ã‚„ã£ãŸã“ã¨ã§1äººã®çœ‹è­·å¸«ã®æ„æ€æ±ºå®šã«å½±éŸ¿ã‚’ä¸ŽãˆãŸã‹ï¼Ÿ

â–  ãƒãƒ¼ãƒ B: æ¥é€±ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€æ‹¬ç”Ÿæˆ
- TikTok 7æœ¬ï¼ˆå°æœ¬JSON+ã‚¹ãƒ©ã‚¤ãƒ‰42æžšï¼‰
- Instagram 5æœ¬ï¼ˆã‚«ãƒ«ãƒ¼ã‚»ãƒ«ç´ æï¼‰
- CTA 8:2ãƒ«ãƒ¼ãƒ«ã€ãƒšãƒ«ã‚½ãƒŠãƒã‚§ãƒƒã‚¯

â–  ãƒãƒ¼ãƒ C: SEOå­ãƒšãƒ¼ã‚¸è¿½åŠ 
- æ–°è¦å­ãƒšãƒ¼ã‚¸5-10æœ¬ä½œæˆï¼ˆarea/ or guide/ã«è¿½åŠ ï¼‰
- ãƒ­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ«KWé–‹æ‹“
- å†…éƒ¨ãƒªãƒ³ã‚¯å†æ§‹ç¯‰
- sitemap.xmlæ›´æ–°

â–  ãƒãƒ¼ãƒ D: è‡ªå·±æ”¹å–„
- CLAUDE.mdæ›´æ–°ï¼ˆåŠ¹ã„ãŸãƒ‘ã‚¿ãƒ¼ãƒ³â˜…ã€å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³âœ•ï¼‰
- STATE.mdå…¨é¢æ›´æ–°
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ”¹å–„
- MIXæ¯”çŽ‡èª¿æ•´ææ¡ˆï¼ˆå¤‰æ›´ã¯Slackç¢ºèªå¿…é ˆã€å‹æ‰‹ã«å¤‰ãˆã‚‹ãªï¼‰

å…¨å®Œäº†å¾Œ:
- PROGRESS.mdã«é€±æ¬¡ã‚µãƒžãƒª
- KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æœ€æ–°åŒ–
" 45

git_sync "weekly: Week${WEEK_NUM} æŒ¯ã‚Šè¿”ã‚Š+æ¥é€±åˆ†ç”Ÿæˆ"
update_state "é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Š"

WEEKLY_STATE=$(head -60 STATE.md 2>/dev/null)
slack_notify "ðŸ“ˆ Week${WEEK_NUM} é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
${WEEKLY_STATE:-STATE.mdå‚ç…§}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" "daily"
echo "[$TODAY] pdca_weeklyå®Œäº†" >> "$LOG"
